## 配件碎片转换

### **字典**

changeNum：每周碎片装换次数（新增）

fitSwitchOpenLv：开放等级（已有）

openDayNum：开服天数（新增）

fitSwitchOpenVip：vip条件

### **协议**

----------配件碎片转换------------

C2G_FittingsDebrisRef_Switch = Fittings_Action_Begin+17
fromTankTyep              byte               转换坦克类型
toTankType                  byte               目标坦克类型
length		    in                   转换碎片种类数量
{
	parts                       int             选择部位  
	num	                    int             转换数量
}

### 逻辑

1. 开始转换，检测是否可以转换（checkFittingsDebrisRefSwitch）

   1. 如果开服天数不够，提示
   2. 如果指挥官等级不够，提示
   3. 如果vip等级不够，提示
   4. 判断仓库是否足够，如果不够提示
   5. 如果转换次数不够，提示超出最高转换次数
   6. 判断玩家是否有足够的原配件碎片，不够提示（客户端数据应该保证正确，如果规定正确的话可以抛出异常）
   7. 判断金币是否足够，不够提示
   8. **其他异常数据，抛出异常**

2. 如果没有抛出异常或者返回错误码没问题，开始转换（fittingsDebrisRefSwitch）

   

## 战术系统-军事雷达战术

**主动技能（重点）：**地图选点、获取地块信息（范围内）

1. 技能同步
2. 技能使用（传入一个中心点，记录起来）
3. 地图扫描、标记、同步。

**被动技能（重点）：**出战

玩家身上维护一个限制出战时间（limitTime）

出战时判断是否被限制

1. limitTime >now  限制：禁止出战，提示
2. limitTime <= now  不限制：解除限制

废墟状态解除：

- 解除限制

被废墟时：

- 计算限制时间，存在玩家身上

**战术系统：**

1. 新增战术数据（初始状态 = 未激活）
2. 激活战术（加属性）
3. 升级战术（加属性）
4. 进阶战术 
5. 套装激活和套装进阶（突破）
6. 战术商店（不需要动）

**战术初始化：开放战术时初始化战术。openTactics（）**

**套装初始化：开放战术时初始化**

## 51活动

### 坦克养成部分

1. 通过活动专属道具【坦克改造组件】升级改造坦克

### 关卡挑战部分

### 任务部分

### 奖励部分